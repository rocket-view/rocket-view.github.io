(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,function(e,t,a){e.exports=a(26)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,i,l,s=a(0),h=a.n(s),o=a(10),c=a.n(o),r=a(2),d=a(3),u=a(5),p=a(4),b=a(1),m=a(6),v=a(11),g={MQTT:a.n(v).a},f=[],C={},E={connect:function(e,t,a,i,l,s){(n=new g.MQTT.Client(e,i,"/",l)).onMessageArrived=function(e){C[e.destinationName]&&C[e.destinationName].forEach(function(t){t(e.payloadString,e.destinationName)})},n.connect({timeout:10,userName:t,password:a,cleanSession:!0,useSSL:s,onSuccess:function(){f.forEach(function(e){e()})},onFailure:function(e){alert("Error code ".concat(e.errorCode,": ").concat(e.errorMessage))}})},addConnectListener:function(e){f.push(e)},removeConnectListener:function(e){var t=f.indexOf(e);t>=0&&f.splice(t,1)},subscribe:function(e,t){C[e]?C[e].push(t):(C[e]=[t],n.subscribe(e,{}))},unsubscribe:function(e,t){if(C[e]){var a=C[e].indexOf(t);a>=0&&(C[e].splice(a,1),0===C[e].length&&(delete C[e],n.unsubscribe(e,{})))}},publish:function(e,t){n.send(e,t,0,!1)}},k=(a(17),"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"),y=function(e){function t(e){var a;Object(r.a)(this,t),a=Object(u.a)(this,Object(p.a)(t).call(this,e));for(var n="rocketui";n.length<23;)n+=k.charAt(Math.floor(Math.random()*k.length));return a.state={server:"localhost",username:"",password:"",port:9001,client:n,ssl:!1},a.handleServerChange=a.handleServerChange.bind(Object(b.a)(a)),a.handleUsernameChange=a.handleUsernameChange.bind(Object(b.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(b.a)(a)),a.handlePortChange=a.handlePortChange.bind(Object(b.a)(a)),a.handleClientChange=a.handleClientChange.bind(Object(b.a)(a)),a.handleSslChange=a.handleSslChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"handleServerChange",value:function(e){this.setState({server:e.target.value})}},{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handlePortChange",value:function(e){this.setState({port:e.target.value})}},{key:"handleClientChange",value:function(e){this.setState({client:e.target.value})}},{key:"handleSslChange",value:function(e){this.setState({ssl:e.target.checked})}},{key:"handleSubmit",value:function(e){e.preventDefault(),e.target.form.checkValidity()&&E.connect(this.state.server,this.state.username,this.state.password,parseInt(this.state.port),this.state.client,this.state.ssl)}},{key:"render",value:function(){return h.a.createElement("div",{className:"connect"},h.a.createElement("div",{className:"padding"}),h.a.createElement("div",null,h.a.createElement("div",{className:"padding"}),h.a.createElement("form",{action:"#",onSubmit:this.handleSubmit},h.a.createElement("div",{className:"input-group"},h.a.createElement("h1",null,"Connect to Rocket")),h.a.createElement("div",{className:"input-group"},h.a.createElement("label",{htmlFor:"server"},"Server:"),h.a.createElement("input",{name:"server",type:"text",required:!0,value:this.state.server,onChange:this.handleServerChange})),h.a.createElement("div",{className:"input-group"},h.a.createElement("label",{htmlFor:"username"},"Username:"),h.a.createElement("input",{name:"username",type:"text",value:this.state.username,onChange:this.handleUsernameChange})),h.a.createElement("div",{className:"input-group"},h.a.createElement("label",{htmlFor:"password"},"Password:"),h.a.createElement("input",{name:"password",type:"password",value:this.state.password,onChange:this.handlePasswordChange})),h.a.createElement("div",{className:"input-group"},h.a.createElement("label",{htmlFor:"port"},"Port:"),h.a.createElement("input",{name:"port",type:"number",min:"1",max:"65535",required:!0,value:this.state.port,onChange:this.handlePortChange})),h.a.createElement("div",{className:"input-group"},h.a.createElement("label",{htmlFor:"client"},"Client ID:"),h.a.createElement("input",{name:"client",type:"text",minLength:"1",maxLength:"23",required:!0,value:this.state.client,onChange:this.handleClientChange})),h.a.createElement("div",{className:"input-group checkbox"},h.a.createElement("input",{name:"ssl",type:"checkbox",checked:this.state.ssl,onChange:this.handleSslChange}),h.a.createElement("label",{htmlFor:"ssl"},"Use SSL")),h.a.createElement("div",{className:"input-group"},h.a.createElement("button",{className:"right",type:"submit",onClick:this.handleSubmit},"Connect"))),h.a.createElement("div",{className:"padding"})),h.a.createElement("div",{className:"padding"}))}}]),t}(h.a.Component);a(18);document.addEventListener("dragover",function(e){i=e.clientX,l=e.clientY});var D=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handleDragStart=a.handleDragStart.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"handleDrag",value:function(e,t,a,n){if(this.props.onResize){var s=Math.round(32*i/document.body.clientWidth),h=Math.round(18*l/document.body.clientHeight),o=this.props.left,c=this.props.right,r=this.props.top,d=this.props.bottom;e?(o=s)>=32-c&&(o=32-c-1):t&&32-(c=32-s)<=o&&(c=32-(o+1)),a?(r=h)>=18-d&&(r=18-d-1):n&&18-r<=(d=18-h)&&(d=18-(r+1)),o===this.props.left&&c===this.props.right&&r===this.props.top&&d===this.props.bottom||this.props.onResize(o,c,r,d)}}},{key:"handleDragStart",value:function(e){e.dataTransfer.setData("text/plain",null)}},{key:"render",value:function(){return h.a.createElement("div",{className:"data-view",onContextMenu:this.props.onContextMenu,style:{left:"".concat(100*this.props.left/32,"%"),right:"".concat(100*this.props.right/32,"%"),top:"".concat(100*this.props.top/18,"%"),bottom:"".concat(100*this.props.bottom/18,"%")}},h.a.createElement("div",{className:"handle handle-left",draggable:!0,onDragStart:this.handleDragStart,onDrag:this.handleDrag.bind(this,!0,!1,!1,!1)}),h.a.createElement("div",{className:"handle handle-right",draggable:!0,onDragStart:this.handleDragStart,onDrag:this.handleDrag.bind(this,!1,!0,!1,!1)}),h.a.createElement("div",{className:"handle handle-top",draggable:!0,onDragStart:this.handleDragStart,onDrag:this.handleDrag.bind(this,!1,!1,!0,!1)}),h.a.createElement("div",{className:"handle handle-bottom",draggable:!0,onDragStart:this.handleDragStart,onDrag:this.handleDrag.bind(this,!1,!1,!1,!0)}),h.a.createElement("div",{className:"handle handle-left handle-top",draggable:!0,onDragStart:this.handleDragStart,onDrag:this.handleDrag.bind(this,!0,!1,!0,!1)}),h.a.createElement("div",{className:"handle handle-right handle-top",draggable:!0,onDragStart:this.handleDragStart,onDrag:this.handleDrag.bind(this,!1,!0,!0,!1)}),h.a.createElement("div",{className:"handle handle-left handle-bottom",draggable:!0,onDragStart:this.handleDragStart,onDrag:this.handleDrag.bind(this,!0,!1,!1,!0)}),h.a.createElement("div",{className:"handle handle-right handle-bottom",draggable:!0,onDragStart:this.handleDragStart,onDrag:this.handleDrag.bind(this,!1,!0,!1,!0)}),h.a.createElement("div",{className:"container"},this.props.children))}}]),t}(h.a.Component),O=(a(19),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={x:0,y:0,active:!1},a.handleKeyUp=a.handleKeyUp.bind(Object(b.a)(a)),a.handleBackgroundClick=a.handleBackgroundClick.bind(Object(b.a)(a)),a.handleBtnClick=a.handleBtnClick.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.handleKeyUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKeyUp)}},{key:"componentDidUpdate",value:function(e){if(e.event!==this.props.event){var t=this.props.event.clientX,a=this.props.event.clientY;t+100>document.body.clientWidth&&(t-=100),a+20*this.props.elements.length>document.body.clientHeight&&(a=document.body.clientHeight-20*this.props.elements.length),this.setState({x:t,y:a,active:!0}),document.addEventListener("click",this.handleBackgroundClick)}}},{key:"handleKeyUp",value:function(e){27===e.keyCode&&this.state.active&&(this.setState({active:!1}),document.removeEventListener("click",this.handleBackgroundClick))}},{key:"handleBackgroundClick",value:function(e){e.target.parentNode!==this.ul&&(this.setState({active:!1}),document.removeEventListener("click",this.handleBackgroundClick))}},{key:"handleBtnClick",value:function(e,t){this.setState({active:!1}),document.removeEventListener("click",this.handleBackgroundClick),this.props.onClick&&this.props.onClick[e]&&this.props.onClick[e](t)}},{key:"render",value:function(){var e=this;return this.state.active?h.a.createElement("ul",{className:"context-menu",ref:function(t){return e.ul=t},style:{left:"".concat(this.state.x,"px"),top:"".concat(this.state.y,"px")}},this.props.elements.map(function(t,a){return h.a.createElement("li",{key:"el-".concat(a),onClick:e.handleBtnClick.bind(e,a)},t)})):h.a.createElement("div",null)}}]),t}(h.a.Component)),S=(a(20),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={data:{},format:[],text:"",ctxEv:{},edit:!1,editText:""},a.handlePublish=a.handlePublish.bind(Object(b.a)(a)),a.handleContextMenu=a.handleContextMenu.bind(Object(b.a)(a)),a.handleEditClick=a.handleEditClick.bind(Object(b.a)(a)),a.handleDeleteClick=a.handleDeleteClick.bind(Object(b.a)(a)),a.handleFinishEdit=a.handleFinishEdit.bind(Object(b.a)(a)),a.handleEditChange=a.handleEditChange.bind(Object(b.a)(a)),a.handleEditCancel=a.handleEditCancel.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"clearData",value:function(){var e=this;Object.getOwnPropertyNames(this.state.data).forEach(function(t){E.unsubscribe(t,e.handlePublish)})}},{key:"formatString",value:function(e,t){var a="";return t.forEach(function(t,n){n%2?e[t]?a+=e[t]:a+="?":a+=t}),a}},{key:"updateData",value:function(){for(var e=this,t=[],a=[],n=this.props.data;n.length>0;){var i=n.indexOf("{");if(i<0){a.push(n);break}a.push(n.substr(0,i)),i=(n=n.substr(i+1)).indexOf("}");var l=n.substr(0,i);t.push(l),a.push(l),n=n.substr(i+1)}t.forEach(function(t){E.subscribe(t,e.handlePublish)}),this.setState({data:{},format:a,text:this.formatString({},a)})}},{key:"componentDidMount",value:function(){this.updateData()}},{key:"componentWillUnmount",value:function(){this.clearData()}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&(this.clearData(),this.updateData())}},{key:"handlePublish",value:function(e,t){var a=this.state.format;a[t]=e,this.setState({data:a,text:this.formatString(a,this.state.format)})}},{key:"handleContextMenu",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({ctxEv:{clientX:e.clientX,clientY:e.clientY,ev:e}})}},{key:"handleEditClick",value:function(){this.setState({edit:!0,editText:this.props.data})}},{key:"handleDeleteClick",value:function(){this.props.onDelete&&this.props.onDelete()}},{key:"handleFinishEdit",value:function(){this.setState({edit:!1}),this.props.onDataChange&&this.props.onDataChange(this.state.editText)}},{key:"handleEditChange",value:function(e){this.setState({editText:e.target.value})}},{key:"handleEditCancel",value:function(){this.setState({edit:!1})}},{key:"render",value:function(){return h.a.createElement(D,{left:this.props.left,right:this.props.right,top:this.props.top,bottom:this.props.bottom,onResize:this.props.onResize,onContextMenu:this.handleContextMenu},this.state.edit?h.a.createElement("div",{className:"label-edit-container"},h.a.createElement("textarea",{className:"label-edit-area",value:this.state.editText,onChange:this.handleEditChange}),h.a.createElement(O,{event:this.state.ctxEv,elements:["Save","Cancel","Delete"],onClick:[this.handleFinishEdit,this.handleEditCancel,this.handleDeleteClick]})):h.a.createElement("div",null,this.state.text.split("\n").map(function(e,t){return h.a.createElement("p",{className:"label",key:t},e)}),h.a.createElement(O,{event:this.state.ctxEv,elements:["Edit Text","Delete"],onClick:[this.handleEditClick,this.handleDeleteClick]})))}}]),t}(h.a.Component)),x=a(7),j=a.n(x),w=(a(21),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={ctxEv:{},edit:!1,editText:""},a.handlePublish=a.handlePublish.bind(Object(b.a)(a)),a.handleContextMenu=a.handleContextMenu.bind(Object(b.a)(a)),a.handleEditClick=a.handleEditClick.bind(Object(b.a)(a)),a.handleDeleteClick=a.handleDeleteClick.bind(Object(b.a)(a)),a.handleFinishEdit=a.handleFinishEdit.bind(Object(b.a)(a)),a.handleEditChange=a.handleEditChange.bind(Object(b.a)(a)),a.handleEditCancel=a.handleEditCancel.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.data.length>0&&E.subscribe(this.props.data,this.handlePublish),this.baseTime=new Date,this.data=new j.a.TimeSeries;var e=new j.a.SmoothieChart({responsive:!0});e.addTimeSeries(this.data,{strokeStyle:"#00FF00",fillStyle:"rgba(0, 255, 0, 0.2)",lineWidth:1}),e.streamTo(this.canvas,500)}},{key:"componentWillUnmount",value:function(){this.props.data.length>0&&E.unsubscribe(this.props.data,this.handlePublish)}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&(e.data.length>0&&E.unsubscribe(e.data,this.handlePublish),this.props.data.length>0&&E.subscribe(this.props.data,this.handlePublish))}},{key:"handlePublish",value:function(e){this.data.append((new Date).getTime(),parseFloat(e))}},{key:"handleContextMenu",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({ctxEv:{clientX:e.clientX,clientY:e.clientY,ev:e}})}},{key:"handleEditClick",value:function(){this.setState({edit:!0,editText:this.props.data})}},{key:"handleDeleteClick",value:function(){this.props.onDelete&&this.props.onDelete()}},{key:"handleFinishEdit",value:function(){this.setState({edit:!1}),this.props.onDataChange&&this.props.onDataChange(this.state.editText)}},{key:"handleEditChange",value:function(e){this.setState({editText:e.target.value})}},{key:"handleEditCancel",value:function(){this.setState({edit:!1})}},{key:"render",value:function(){var e=this;return h.a.createElement(D,{left:this.props.left,right:this.props.right,top:this.props.top,bottom:this.props.bottom,onResize:this.props.onResize,onContextMenu:this.handleContextMenu},h.a.createElement("div",{className:"graph-container"},h.a.createElement("canvas",{className:"graph-canvas",ref:function(t){return e.canvas=t}}),this.state.edit?h.a.createElement("div",null,h.a.createElement("textarea",{value:this.state.editText,onChange:this.handleEditChange}),h.a.createElement(O,{event:this.state.ctxEv,elements:["Save","Cancel","Delete"],onClick:[this.handleFinishEdit,this.handleEditCancel,this.handleDeleteClick]})):h.a.createElement("div",null,h.a.createElement(O,{event:this.state.ctxEv,elements:["Edit Sensor","Delete"],onClick:[this.handleEditClick,this.handleDeleteClick]}))))}}]),t}(h.a.Component)),N=(a(22),a(23),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={text:"",ctxEv:{},edit:!1,editLabel:"",editTopic:"",editValue:""},a.handleContextMenu=a.handleContextMenu.bind(Object(b.a)(a)),a.handleEditClick=a.handleEditClick.bind(Object(b.a)(a)),a.handleDeleteClick=a.handleDeleteClick.bind(Object(b.a)(a)),a.handleFinishEdit=a.handleFinishEdit.bind(Object(b.a)(a)),a.handleEditCancel=a.handleEditCancel.bind(Object(b.a)(a)),a.handleEditLabelChange=a.handleEditLabelChange.bind(Object(b.a)(a)),a.handleEditTopicChange=a.handleEditTopicChange.bind(Object(b.a)(a)),a.handleEditValueChange=a.handleEditValueChange.bind(Object(b.a)(a)),a.handleClick=a.handleClick.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"handleContextMenu",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({ctxEv:{clientX:e.clientX,clientY:e.clientY,ev:e}})}},{key:"handleEditClick",value:function(){if(this.props.data.length>0){var e=JSON.parse(this.props.data);this.setState({edit:!0,editLabel:e.label,editTopic:e.topic,editValue:e.value})}else this.setState({edit:!0,editLabel:"",editTopic:"",editValue:""})}},{key:"handleDeleteClick",value:function(){this.props.onDelete&&this.props.onDelete()}},{key:"handleFinishEdit",value:function(){this.setState({edit:!1}),this.props.onDataChange&&this.props.onDataChange(JSON.stringify({label:this.state.editLabel,topic:this.state.editTopic,value:this.state.editValue}))}},{key:"handleEditCancel",value:function(){this.setState({edit:!1})}},{key:"handleEditLabelChange",value:function(e){this.setState({editLabel:e.target.value})}},{key:"handleEditTopicChange",value:function(e){this.setState({editTopic:e.target.value})}},{key:"handleEditValueChange",value:function(e){this.setState({editValue:e.target.value})}},{key:"handleClick",value:function(){if(this.props.data.length>0){var e=JSON.parse(this.props.data);E.publish(e.topic,e.value)}}},{key:"render",value:function(){return h.a.createElement(D,{left:this.props.left,right:this.props.right,top:this.props.top,bottom:this.props.bottom,onResize:this.props.onResize,onContextMenu:this.handleContextMenu},this.state.edit?h.a.createElement("div",{className:"button-edit-container"},h.a.createElement("form",{action:"#"},h.a.createElement("div",{className:"input-group"},h.a.createElement("label",{htmlFor:"label"},"Label:"),h.a.createElement("input",{name:"label",type:"text",required:!0,value:this.state.editLabel,onChange:this.handleEditLabelChange})),h.a.createElement("div",{className:"input-group"},h.a.createElement("label",{htmlFor:"topic"},"Topic:"),h.a.createElement("input",{name:"topic",type:"text",required:!0,value:this.state.editTopic,onChange:this.handleEditTopicChange})),h.a.createElement("div",{className:"input-group"},h.a.createElement("label",{htmlFor:"value"},"Payload:"),h.a.createElement("input",{name:"value",type:"text",required:!0,value:this.state.editValue,onChange:this.handleEditValueChange}))),h.a.createElement(O,{event:this.state.ctxEv,elements:["Save","Cancel","Delete"],onClick:[this.handleFinishEdit,this.handleEditCancel,this.handleDeleteClick]})):h.a.createElement("div",{className:"button-view",onClick:this.handleClick},this.props.data.length>0&&JSON.parse(this.props.data).label.split("\n").map(function(e,t){return h.a.createElement("p",{key:t},e)}),h.a.createElement(O,{event:this.state.ctxEv,elements:["Edit Text","Delete"],onClick:[this.handleEditClick,this.handleDeleteClick]})))}}]),t}(h.a.Component)),P=(a(24),{Label:S,Graph:w,Button:N,Textbox:function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={text:"",ctxEv:{},edit:!1,editText:""},a.lastPublish=new Date(0),a.handlePublish=a.handlePublish.bind(Object(b.a)(a)),a.handleContextMenu=a.handleContextMenu.bind(Object(b.a)(a)),a.handleEditClick=a.handleEditClick.bind(Object(b.a)(a)),a.handleDeleteClick=a.handleDeleteClick.bind(Object(b.a)(a)),a.handleFinishEdit=a.handleFinishEdit.bind(Object(b.a)(a)),a.handleEditChange=a.handleEditChange.bind(Object(b.a)(a)),a.handleEditCancel=a.handleEditCancel.bind(Object(b.a)(a)),a.handleChange=a.handleChange.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.data.length>0&&E.subscribe(this.props.data,this.handlePublish)}},{key:"componentWillUnmount",value:function(){this.props.data.length>0&&E.unsubscribe(this.props.data,this.handlePublish)}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&(e.data.length>0&&E.unsubscribe(e.data,this.handlePublish),this.props.data.length>0&&E.subscribe(this.props.data,this.handlePublish))}},{key:"handlePublish",value:function(e){new Date-this.lastPublish>5e3&&this.setState({text:e})}},{key:"handleContextMenu",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({ctxEv:{clientX:e.clientX,clientY:e.clientY,ev:e}})}},{key:"handleEditClick",value:function(){this.setState({edit:!0,editText:this.props.data})}},{key:"handleDeleteClick",value:function(){this.props.onDelete&&this.props.onDelete()}},{key:"handleFinishEdit",value:function(){this.setState({edit:!1}),this.props.onDataChange&&this.props.onDataChange(this.state.editText)}},{key:"handleEditChange",value:function(e){this.setState({editText:e.target.value})}},{key:"handleEditCancel",value:function(){this.setState({edit:!1})}},{key:"handleChange",value:function(e){this.setState({text:e.target.value}),this.props.data.length>0&&(this.lastPublish=new Date,E.publish(this.props.data,e.target.value))}},{key:"render",value:function(){return h.a.createElement(D,{left:this.props.left,right:this.props.right,top:this.props.top,bottom:this.props.bottom,onResize:this.props.onResize,onContextMenu:this.handleContextMenu},this.state.edit?h.a.createElement("div",{className:"text-input-container"},h.a.createElement("textarea",{className:"text-input-area",value:this.state.editText,onChange:this.handleEditChange}),h.a.createElement(O,{event:this.state.ctxEv,elements:["Save","Cancel","Delete"],onClick:[this.handleFinishEdit,this.handleEditCancel,this.handleDeleteClick]})):h.a.createElement("div",{className:"text-input-container"},h.a.createElement("textarea",{className:"text-input-area",value:this.state.text,onChange:this.handleChange}),h.a.createElement(O,{event:this.state.ctxEv,elements:["Edit Topic","Delete"],onClick:[this.handleEditClick,this.handleDeleteClick]})))}}]),t}(h.a.Component)}),M=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={components:[],ctxEv:{}},a.handlePublish=a.handlePublish.bind(Object(b.a)(a)),a.lastPublish=new Date(0),a.handleContextMenu=a.handleContextMenu.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){E.subscribe("rocket_view/display_config",this.handlePublish)}},{key:"componentWillUnmount",value:function(){E.unsubscribe("rocket_view/display_config",this.handlePublish)}},{key:"handlePublish",value:function(e){new Date-this.lastPublish>5e3&&this.setState({components:JSON.parse(e)})}},{key:"handleResize",value:function(e,t,a,n,i){var l=this.state.components;l[e].size={left:t,right:a,top:n,bottom:i},this.setState({components:l}),this.lastPublish=new Date,E.publish("rocket_view/display_config/set",JSON.stringify(l))}},{key:"handleDelete",value:function(e){var t=this.state.components;t.splice(e,1),this.setState({components:t}),this.lastPublish=new Date,E.publish("rocket_view/display_config/set",JSON.stringify(t))}},{key:"handleDataChange",value:function(e,t){var a=this.state.components;a[e].data=t,this.setState({components:a}),this.lastPublish=new Date,E.publish("rocket_view/display_config/set",JSON.stringify(a))}},{key:"handleContextMenu",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({ctxEv:{clientX:e.clientX,clientY:e.clientY,ev:e}})}},{key:"handleAddClick",value:function(e){var t=Math.round(32*this.state.ctxEv.clientX/document.body.clientWidth),a=Math.round(18*this.state.ctxEv.clientY/document.body.clientHeight),n=this.state.components;n.push({type:e,size:{left:t,right:32-t-3,top:a,bottom:18-a-2},data:""}),this.setState({components:n}),this.lastPublish=new Date,E.publish("rocket_view/display_config/set",JSON.stringify(n))}},{key:"render",value:function(){for(var e=this,t=[],a=1;a<32;++a)for(var n=1;n<18;++n)t.push(h.a.createElement("div",{className:"grid-dot",key:"grid-".concat(a,"-").concat(n),style:{left:"".concat(100*a/32,"vw"),top:"".concat(100*n/18,"vh")}}));var i=[];return this.state.components.forEach(function(t,a){var n=P[t.type];i.push(h.a.createElement(n,{key:"comp-".concat(a),data:t.data,left:t.size.left,right:t.size.right,top:t.size.top,bottom:t.size.bottom,onResize:e.handleResize.bind(e,a),onDelete:e.handleDelete.bind(e,a),onDataChange:e.handleDataChange.bind(e,a)}))}),h.a.createElement("div",{className:"main",onContextMenu:this.handleContextMenu},t,i,h.a.createElement(O,{event:this.state.ctxEv,elements:Object.getOwnPropertyNames(P).map(function(e){return"Add ".concat(e)}),onClick:Object.getOwnPropertyNames(P).map(function(t){return e.handleAddClick.bind(e,t)})}))}}]),t}(h.a.Component),T=(a(25),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={connected:!1},a.handleConnect=a.handleConnect.bind(Object(b.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){E.addConnectListener(this.handleConnect)}},{key:"componentWillUnmount",value:function(){E.removeConnectListener(this.handleConnect)}},{key:"handleConnect",value:function(){this.setState({connected:!0})}},{key:"render",value:function(){return h.a.createElement("div",{className:"app"},this.state.connected?h.a.createElement(M,null):h.a.createElement(y,null))}}]),t}(h.a.Component)),F=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(h.a.createElement(T,null),document.getElementById("root")),F||function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");F?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):L(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):L(t,e)})}}()}],[[12,1,2]]]);
//# sourceMappingURL=main.094075a4.chunk.js.map